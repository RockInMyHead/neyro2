# üö® –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ nginx –Ω–∞ TimeWeb

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞:
- `nginx: [emerg] "proxy_http_version" directive is not allowed here`
- `/etc/nginx/sites-available/default` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

## ‚úÖ –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ:

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
```bash
ssh root@194.87.226.56
cd /var/www/timeweb-deploy
```

### –®–∞–≥ 2: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É
```bash
chmod +x diagnose-nginx.sh
sudo ./diagnose-nginx.sh
```

### –®–∞–≥ 3: –†—É—á–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
```bash
chmod +x manual-fix.sh
sudo ./manual-fix.sh
```

### –®–∞–≥ 4: –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç
```bash
chmod +x fix-nginx-universal.sh
sudo ./fix-nginx-universal.sh
```

## üîç –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Ä—É—á–Ω–æ–π —Å–ø–æ—Å–æ–±:

–ï—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
# –ù–∞–π–¥–∏—Ç–µ –∞–∫—Ç–∏–≤–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥
ls -la /etc/nginx/sites-enabled/

# –°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é
sudo cp /etc/nginx/sites-enabled/neyro /etc/nginx/sites-enabled/neyro.backup

# –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo cp nginx-fixed.conf /etc/nginx/sites-enabled/neyro

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
sudo nginx -t

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ nginx
sudo systemctl reload nginx
```

## üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ backend
curl -I http://127.0.0.1:8000/generate_dalle

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API —á–µ—Ä–µ–∑ nginx
curl -I http://194.87.226.56/generate_dalle
```

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ 502 Bad Gateway –∏—Å—á–µ–∑–Ω–µ—Ç
- ‚úÖ API –∑–∞–ø—Ä–æ—Å—ã –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
- ‚úÖ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è

**–í–∞—à —Å–∞–π—Ç –Ω–∞ `http://194.87.226.56` –¥–æ–ª–∂–µ–Ω –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å!** üöÄ