# üöÄ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å Backend —Å–µ—Ä–≤–µ—Ä–æ–º

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞
–û—à–∏–±–∫–∞ 502 Bad Gateway –¥–ª—è API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤:
```
[Error] Failed to load resource: the server responded with a status of 502 (Bad Gateway) (generate_dalle, line 0)
```

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
1. **–§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø—ã—Ç–∞–µ—Ç—Å—è –≤—ã–∑–≤–∞—Ç—å API:** `http://194.87.226.56/generate_dalle`
2. **Nginx –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å** –∏ –ø—ã—Ç–∞–µ—Ç—Å—è –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ `localhost:8003`
3. **Python —Å–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω** –Ω–∞ –ø–æ—Ä—Ç—É 8003
4. **Nginx –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 502 Bad Gateway**

### –ü–æ—á–µ–º—É –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
- Python —Å–µ—Ä–≤–µ—Ä (uvicorn) –Ω–µ –∑–∞–ø—É—â–µ–Ω
- –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—Ç—É
- –ü—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ Python
- –°–µ—Ä–≤–µ—Ä —É–ø–∞–ª –∏–∑-–∑–∞ –æ—à–∏–±–æ–∫

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ backend
```bash
cd /home/neyro/neyro2/timeweb-deploy
chmod +x check-backend-status.sh
./check-backend-status.sh
```

### 2. –ó–∞–ø—É—Å–∫ backend —Å–µ—Ä–≤–µ—Ä–∞
```bash
chmod +x start-backend.sh
./start-backend.sh
```

### 3. –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ backend
```bash
cd /home/neyro/neyro2

# –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
source venv/bin/activate

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
uvicorn app:app --host 0.0.0.0 --port 8003
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
```bash
cd /home/neyro/neyro2
nohup uvicorn app:app --host 0.0.0.0 --port 8003 > backend.log 2>&1 &
```

## üîß –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
```bash
# –ü–æ–∏—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ uvicorn
ps aux | grep uvicorn

# –ü–æ–∏—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –Ω–∞ –ø–æ—Ä—Ç—É 8003
netstat -tlnp | grep :8003
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
```bash
# –õ–æ–≥–∏ backend —Å–µ—Ä–≤–µ—Ä–∞
tail -f /home/neyro/neyro2/backend.log

# –õ–æ–≥–∏ nginx
journalctl -u nginx -f
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
cd /home/neyro/neyro2
python3 -c "import fastapi, uvicorn"
```

## üö® –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
ls -la app.py
```

### 2. –ü–æ—Ä—Ç –∑–∞–Ω—è—Ç
```bash
# –ù–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –ø–æ—Ä—Ç—É 8003
lsof -i :8003

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å
kill -9 <PID>
```

### 3. –ü—Ä–æ–±–ª–µ–º—ã —Å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º
```bash
# –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å venv
rm -rf venv
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

## üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ backend:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞:**
   ```bash
   ./check-backend-status.sh
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å API –Ω–∞–ø—Ä—è–º—É—é:**
   ```bash
   curl http://localhost:8003/docs
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ nginx:**
   ```bash
   curl http://194.87.226.56/generate_dalle
   ```

4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**
   - –û—Ç–∫—Ä—ã—Ç—å `http://194.87.226.56`
   - –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ `http://localhost:8003/docs` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω
- ‚úÖ `http://194.87.226.56/generate_dalle` –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–æ–ª–∂–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å
- ‚úÖ –û—à–∏–±–∫–∏ 502 Bad Gateway –¥–æ–ª–∂–Ω—ã –∏—Å—á–µ–∑–Ω—É—Ç—å

## üöÄ –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
```bash
cd /home/neyro/neyro2/timeweb-deploy
./check-backend-status.sh
./start-backend.sh
./check-backend-status.sh
```

## üÜò –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã:**
   ```bash
   free -h
   df -h
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:**
   ```bash
   ls -la /home/neyro/neyro2/
   ```

3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏—Å—Ç–µ–º—É:**
   ```bash
   reboot
   ```

4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å firewall:**
   ```bash
   ufw status
   ``` 